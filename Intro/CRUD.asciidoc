=== Indexing documents

Before we can store the above user document in Elasticsearch, we need to decide
what _type_ of document it is, and where -- in which _index_ -- to store it.

.Index, type and ID
****
For the moment, think of an _index_ as being like a database in
a relational database, and a _type_ as being like a table in that database.

A document ID must be unique across the index and the type, otherwise
you may overwrite an existing document. A unique ID will be auto-generated
if you don't specify one.
****

We are going to store it in the `blogs` index, as type `user`, and we
can assign this user the unique ID `johnsmith`:

    curl -XPUT 'http://localhost:9200/blogs/user/johnsmith?pretty' -d '
    {
        "email":     "john@smith.com",
        "name": {
            "first": "John",
            "last":  "Smith"
        },
        "bio":       "Eco-warrior and defender of the weak",
        "age":       25,
        "join_date": "2013/05/01",
        "interests": ["dolphins", "whales"]
    }
    '

And we receive the following response, which confirms that our document
has been indexed correctly:

    {
      "ok" : true,
      "_index" : "blogs",
      "_type" : "user",
      "_id" : "johnsmith",
      "_version" : 1
    }

=== Real-time GET

Elasticsearch has _real-time GET_. In other words, as soon as the document
is indexed, it can be retrieved from any node in the cluster.

Not only that, but changes to documents are persistent. If the whole cluster
suffers a power failure immediately after indexing a document, the change
will still be there when the cluster is restarted.

We can retrieve the document using the same `index`, `type` and `id`:

    curl -XGET 'http://localhost:9200/blogs/user/johnsmith?pretty'

It returns the exact same JSON document that we indexed, as the `_source`
field, plus some extra metadata:

    {
        "_index" :    "blogs",
        "_type" :     "user",
        "_id" :       "johnsmith",
        "_version" :  1,
        "exists" :    true,
        "_source" :   {
             "email":     "john@smith.com",
             "name": {
                 "first": "John",
                 "last":  "Smith"
             },
             "bio":       "Eco-warrior and defender of the weak",
             "age":       25,
             "join_date": "2013/05/01",
             "interests": ["dolphins", "whales"]
        }
    }



